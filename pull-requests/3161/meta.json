{"url": "https://api.github.com/repos/KeYProject/key/pulls/3161", "id": 1384593041, "node_id": "PR_kwDOIpmSbc5ShzaR", "html_url": "https://github.com/KeYProject/key/pull/3161", "diff_url": "https://github.com/KeYProject/key/pull/3161.diff", "patch_url": "https://github.com/KeYProject/key/pull/3161.patch", "issue_url": "https://api.github.com/repos/KeYProject/key/issues/3161", "number": 3161, "state": "open", "locked": false, "title": "ADTs for KeY", "user": {"login": "wadoon", "id": 104259, "node_id": "MDQ6VXNlcjEwNDI1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/104259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wadoon", "html_url": "https://github.com/wadoon", "followers_url": "https://api.github.com/users/wadoon/followers", "following_url": "https://api.github.com/users/wadoon/following{/other_user}", "gists_url": "https://api.github.com/users/wadoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/wadoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wadoon/subscriptions", "organizations_url": "https://api.github.com/users/wadoon/orgs", "repos_url": "https://api.github.com/users/wadoon/repos", "events_url": "https://api.github.com/users/wadoon/events{/privacy}", "received_events_url": "https://api.github.com/users/wadoon/received_events", "type": "User", "site_admin": false}, "body": "Extension of the KeY grammar to allow the definition of ADTs. \r\nThe grammar for ADTs follows the typical defintions in KeY. ADTs are defined within a `\\datatypes { ... }` block, and are translated onto the existing infrastructure (Sorts, Functions, Taclets). The grammar is as follows:\r\n\r\n```\r\n\\datatypes {\r\n   <name> := <constructor> | ... | <constructor>;\r\n   ...\r\n }\r\n```\r\n\r\nwhere constructor is a function definition `<cname>( <sort> <argName>, ...)`. \r\n\r\nCurrently, three taclets are generated for each datatype definiton:\r\n\r\n1. Axiom taclets that adds the induction as an axiom on the sequence \r\n   ```\r\n   (\\forall ADT a; phi) <-> phi[a/C1] & ... & phi[a/Cn] ==> \r\n   ---------------------------------------------------------\r\n                    \\forall ADT a; phi\r\n   ```\r\n\r\n2. Induction taclets for proving a sentence for all ADTs.\r\n   ```\r\n   \\forall ADT a; phi ==> \r\n   ==> phi[a/C1] \r\n   ==> ... \r\n   ==> phi[a/Cn]\r\n   ------------------------------------------------------\r\n                    ==> \\forall ADT a; phi\r\n   ```\r\n\r\n   A direct consequence of (1)\r\n\r\n3. A case distinction taclet\r\n\r\n   ```\r\n   x = C1 ==> \r\n   ...\r\n   x = Cn ==> \r\n   ------------------------------------------------------\r\n                      x : ADT (anywhere)\r\n   ```\r\n\r\n   This is a direct consequence of the disjunction ` x = C1 | ... | x = Cn`.\r\n\r\n\r\n### Example\r\n\r\n**Input**\r\n```\r\n\\datatypes {\r\n  MyList = MNil | MCons(any head, MyList tail);\r\n}\r\n```\r\n\r\n**Generated Taclets**\r\n\r\n```\r\nMyList_Axiom {\r\n    \\schemaVar \\formula phi;\r\n    \\schemaVar \\variables MyList x;\r\n    \r\n    \\find(\\forall x; phi)\r\n    \\varcond(\\notFreeIn(x, phi))\r\n    \\add(\r\n             \\forall x; phi\r\n         <->   {\\subst x;MNil}phi\r\n             & \\forall tail; \\forall head; ({\\subst x;tail}phi -> {\\subst x;MCons(head, tail)}phi)\r\n        ==>\r\n      )\r\n    \\displayname \"Axiom for MyList\"\r\n  }\r\n\r\nMyList_Ind {\r\n       \\schemaVar \\formula phi;\r\n       \r\n       \"MNil\":\r\n           \\add(==> {\\subst x;MNil}phi);\r\n       \"MCons(anyhead,MyListtail)\":\r\n           \\add(\r\n               ==>\r\n                \\forall tail; \\forall head; ({\\subst x;tail}phi -> {\\subst x;MCons(head, tail)}phi)\r\n             );\r\n       \"Use case of MyList\":\r\n           \\add(\\forall x; phi ==>)\r\n       \\displayname \"Induction for MyList\"\r\n     }\r\n\r\nMyList_ctor_split {\r\n          \\schemaVar \\term MyList var;\r\n          \\schemaVar \\skolemTerm any head;\r\n          \\schemaVar \\skolemTerm MyList tail;\r\n          \r\n          \\find(var)\r\n          \\sameUpdateLevel\r\n          \"#var = MNil\":\r\n              \\add(var = MNil ==>);\r\n          \"#var = MCons\":\r\n              \\add(var = MCons(head, tail) ==>)\r\n          \\displayname \"case distinction of MyList\"\r\n        }\r\n```\r\n\r\n### Current Problems / TODO \r\n\r\n* [ ] Matching/Application of taclets not working \r\n* [ ] Test cases", "created_at": "2023-06-08T14:38:12Z", "updated_at": "2023-06-09T11:17:45Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "1802d6842dcd2003671e66bc7a2300d045036ac8", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": true, "commits_url": "https://api.github.com/repos/KeYProject/key/pulls/3161/commits", "review_comments_url": "https://api.github.com/repos/KeYProject/key/pulls/3161/comments", "review_comment_url": "https://api.github.com/repos/KeYProject/key/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/KeYProject/key/issues/3161/comments", "statuses_url": "https://api.github.com/repos/KeYProject/key/statuses/81c7dea27f0f94fbc6ba215214ea04fb5d9d92ec", "head": {"label": "wadoon:weigl/datatype", "ref": "weigl/datatype", "sha": "81c7dea27f0f94fbc6ba215214ea04fb5d9d92ec", "user": {"login": "wadoon", "id": 104259, "node_id": "MDQ6VXNlcjEwNDI1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/104259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wadoon", "html_url": "https://github.com/wadoon", "followers_url": "https://api.github.com/users/wadoon/followers", "following_url": "https://api.github.com/users/wadoon/following{/other_user}", "gists_url": "https://api.github.com/users/wadoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/wadoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wadoon/subscriptions", "organizations_url": "https://api.github.com/users/wadoon/orgs", "repos_url": "https://api.github.com/users/wadoon/repos", "events_url": "https://api.github.com/users/wadoon/events{/privacy}", "received_events_url": "https://api.github.com/users/wadoon/received_events", "type": "User", "site_admin": false}, "repo": {"id": 595176677, "node_id": "R_kgDOI3ms5Q", "name": "key", "full_name": "wadoon/key", "private": false, "owner": {"login": "wadoon", "id": 104259, "node_id": "MDQ6VXNlcjEwNDI1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/104259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wadoon", "html_url": "https://github.com/wadoon", "followers_url": "https://api.github.com/users/wadoon/followers", "following_url": "https://api.github.com/users/wadoon/following{/other_user}", "gists_url": "https://api.github.com/users/wadoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/wadoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wadoon/subscriptions", "organizations_url": "https://api.github.com/users/wadoon/orgs", "repos_url": "https://api.github.com/users/wadoon/repos", "events_url": "https://api.github.com/users/wadoon/events{/privacy}", "received_events_url": "https://api.github.com/users/wadoon/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/wadoon/key", "description": "KeY Theorem Prover for Deductive Java Verification", "fork": true, "url": "https://api.github.com/repos/wadoon/key", "forks_url": "https://api.github.com/repos/wadoon/key/forks", "keys_url": "https://api.github.com/repos/wadoon/key/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/wadoon/key/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/wadoon/key/teams", "hooks_url": "https://api.github.com/repos/wadoon/key/hooks", "issue_events_url": "https://api.github.com/repos/wadoon/key/issues/events{/number}", "events_url": "https://api.github.com/repos/wadoon/key/events", "assignees_url": "https://api.github.com/repos/wadoon/key/assignees{/user}", "branches_url": "https://api.github.com/repos/wadoon/key/branches{/branch}", "tags_url": "https://api.github.com/repos/wadoon/key/tags", "blobs_url": "https://api.github.com/repos/wadoon/key/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/wadoon/key/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/wadoon/key/git/refs{/sha}", "trees_url": "https://api.github.com/repos/wadoon/key/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/wadoon/key/statuses/{sha}", "languages_url": "https://api.github.com/repos/wadoon/key/languages", "stargazers_url": "https://api.github.com/repos/wadoon/key/stargazers", "contributors_url": "https://api.github.com/repos/wadoon/key/contributors", "subscribers_url": "https://api.github.com/repos/wadoon/key/subscribers", "subscription_url": "https://api.github.com/repos/wadoon/key/subscription", "commits_url": "https://api.github.com/repos/wadoon/key/commits{/sha}", "git_commits_url": "https://api.github.com/repos/wadoon/key/git/commits{/sha}", "comments_url": "https://api.github.com/repos/wadoon/key/comments{/number}", "issue_comment_url": "https://api.github.com/repos/wadoon/key/issues/comments{/number}", "contents_url": "https://api.github.com/repos/wadoon/key/contents/{+path}", "compare_url": "https://api.github.com/repos/wadoon/key/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/wadoon/key/merges", "archive_url": "https://api.github.com/repos/wadoon/key/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/wadoon/key/downloads", "issues_url": "https://api.github.com/repos/wadoon/key/issues{/number}", "pulls_url": "https://api.github.com/repos/wadoon/key/pulls{/number}", "milestones_url": "https://api.github.com/repos/wadoon/key/milestones{/number}", "notifications_url": "https://api.github.com/repos/wadoon/key/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/wadoon/key/labels{/name}", "releases_url": "https://api.github.com/repos/wadoon/key/releases{/id}", "deployments_url": "https://api.github.com/repos/wadoon/key/deployments", "created_at": "2023-01-30T14:58:51Z", "updated_at": "2023-02-08T10:35:58Z", "pushed_at": "2023-06-09T07:39:05Z", "git_url": "git://github.com/wadoon/key.git", "ssh_url": "git@github.com:wadoon/key.git", "clone_url": "https://github.com/wadoon/key.git", "svn_url": "https://github.com/wadoon/key", "homepage": "https://key-project.org", "size": 525144, "stargazers_count": 0, "watchers_count": 0, "language": "Java", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 1, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 1, "watchers": 0, "default_branch": "main"}}, "base": {"label": "KeYProject:main", "ref": "main", "sha": "0fee8dcd09d808fae7a8624059edac5a8e3852c4", "user": {"login": "KeYProject", "id": 18749969, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE4NzQ5OTY5", "avatar_url": "https://avatars.githubusercontent.com/u/18749969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KeYProject", "html_url": "https://github.com/KeYProject", "followers_url": "https://api.github.com/users/KeYProject/followers", "following_url": "https://api.github.com/users/KeYProject/following{/other_user}", "gists_url": "https://api.github.com/users/KeYProject/gists{/gist_id}", "starred_url": "https://api.github.com/users/KeYProject/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KeYProject/subscriptions", "organizations_url": "https://api.github.com/users/KeYProject/orgs", "repos_url": "https://api.github.com/users/KeYProject/repos", "events_url": "https://api.github.com/users/KeYProject/events{/privacy}", "received_events_url": "https://api.github.com/users/KeYProject/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 580489837, "node_id": "R_kgDOIpmSbQ", "name": "key", "full_name": "KeYProject/key", "private": false, "owner": {"login": "KeYProject", "id": 18749969, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE4NzQ5OTY5", "avatar_url": "https://avatars.githubusercontent.com/u/18749969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KeYProject", "html_url": "https://github.com/KeYProject", "followers_url": "https://api.github.com/users/KeYProject/followers", "following_url": "https://api.github.com/users/KeYProject/following{/other_user}", "gists_url": "https://api.github.com/users/KeYProject/gists{/gist_id}", "starred_url": "https://api.github.com/users/KeYProject/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KeYProject/subscriptions", "organizations_url": "https://api.github.com/users/KeYProject/orgs", "repos_url": "https://api.github.com/users/KeYProject/repos", "events_url": "https://api.github.com/users/KeYProject/events{/privacy}", "received_events_url": "https://api.github.com/users/KeYProject/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/KeYProject/key", "description": "KeY Theorem Prover for Deductive Java Verification", "fork": false, "url": "https://api.github.com/repos/KeYProject/key", "forks_url": "https://api.github.com/repos/KeYProject/key/forks", "keys_url": "https://api.github.com/repos/KeYProject/key/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/KeYProject/key/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/KeYProject/key/teams", "hooks_url": "https://api.github.com/repos/KeYProject/key/hooks", "issue_events_url": "https://api.github.com/repos/KeYProject/key/issues/events{/number}", "events_url": "https://api.github.com/repos/KeYProject/key/events", "assignees_url": "https://api.github.com/repos/KeYProject/key/assignees{/user}", "branches_url": "https://api.github.com/repos/KeYProject/key/branches{/branch}", "tags_url": "https://api.github.com/repos/KeYProject/key/tags", "blobs_url": "https://api.github.com/repos/KeYProject/key/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/KeYProject/key/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/KeYProject/key/git/refs{/sha}", "trees_url": "https://api.github.com/repos/KeYProject/key/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/KeYProject/key/statuses/{sha}", "languages_url": "https://api.github.com/repos/KeYProject/key/languages", "stargazers_url": "https://api.github.com/repos/KeYProject/key/stargazers", "contributors_url": "https://api.github.com/repos/KeYProject/key/contributors", "subscribers_url": "https://api.github.com/repos/KeYProject/key/subscribers", "subscription_url": "https://api.github.com/repos/KeYProject/key/subscription", "commits_url": "https://api.github.com/repos/KeYProject/key/commits{/sha}", "git_commits_url": "https://api.github.com/repos/KeYProject/key/git/commits{/sha}", "comments_url": "https://api.github.com/repos/KeYProject/key/comments{/number}", "issue_comment_url": "https://api.github.com/repos/KeYProject/key/issues/comments{/number}", "contents_url": "https://api.github.com/repos/KeYProject/key/contents/{+path}", "compare_url": "https://api.github.com/repos/KeYProject/key/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/KeYProject/key/merges", "archive_url": "https://api.github.com/repos/KeYProject/key/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/KeYProject/key/downloads", "issues_url": "https://api.github.com/repos/KeYProject/key/issues{/number}", "pulls_url": "https://api.github.com/repos/KeYProject/key/pulls{/number}", "milestones_url": "https://api.github.com/repos/KeYProject/key/milestones{/number}", "notifications_url": "https://api.github.com/repos/KeYProject/key/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/KeYProject/key/labels{/name}", "releases_url": "https://api.github.com/repos/KeYProject/key/releases{/id}", "deployments_url": "https://api.github.com/repos/KeYProject/key/deployments", "created_at": "2022-12-20T17:32:07Z", "updated_at": "2023-06-05T06:04:05Z", "pushed_at": "2023-06-09T10:46:11Z", "git_url": "git://github.com/KeYProject/key.git", "ssh_url": "git@github.com:KeYProject/key.git", "clone_url": "https://github.com/KeYProject/key.git", "svn_url": "https://github.com/KeYProject/key", "homepage": "https://key-project.org", "size": 143454, "stargazers_count": 18, "watchers_count": 18, "language": "Java", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": true, "forks_count": 11, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 349, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["formal-verification", "key", "smt-solver", "static-analysis"], "visibility": "public", "forks": 11, "open_issues": 349, "watchers": 18, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/KeYProject/key/pulls/3161"}, "html": {"href": "https://github.com/KeYProject/key/pull/3161"}, "issue": {"href": "https://api.github.com/repos/KeYProject/key/issues/3161"}, "comments": {"href": "https://api.github.com/repos/KeYProject/key/issues/3161/comments"}, "review_comments": {"href": "https://api.github.com/repos/KeYProject/key/pulls/3161/comments"}, "review_comment": {"href": "https://api.github.com/repos/KeYProject/key/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/KeYProject/key/pulls/3161/commits"}, "statuses": {"href": "https://api.github.com/repos/KeYProject/key/statuses/81c7dea27f0f94fbc6ba215214ea04fb5d9d92ec"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null}